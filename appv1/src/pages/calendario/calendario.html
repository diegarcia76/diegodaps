<!--
  Generated template for the Calendario page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar no-border-bottom color="dark">
    <ion-title>
      Elegí el turno
    </ion-title>
  </ion-navbar>

  <ion-toolbar no-border-top color="dark">
    <ion-segment [(ngModel)]="tabs" (ionChange)="selectedTabChanged($event)">
      <ion-segment-button value="now">
        Hoy
      </ion-segment-button>
      <ion-segment-button value="manana">
        {{ dia_maniana }}
      </ion-segment-button>
      <ion-segment-button value="calendar">
        Otro día
      </ion-segment-button>
    </ion-segment>
  </ion-toolbar>
</ion-header>
<ion-content>

  <div [ngSwitch]="tabs" padding-top>
    <ion-list *ngSwitchCase="'now'">
    	<div ng-repeat="group in groups" *ngFor='let tur of turnos'>
    	  <ion-item  class="item-stable" (click)="toggleDetails(tur)">
        	  <span class="hour-line"></span>
        	  <span class="hour"> {{ tur.hora }} HS</span>
        	  <ion-icon name="arrow-dropdown" class="pull-right"></ion-icon>
        </ion-item>
        <ion-item class="item-accordion" *ngIf="tur.showDetails">
        	    <button ion-button  *ngFor='let t of tur.turnos' class="{{ t.title }} btn-small button button-md button-default button-default-md button-round button-round-md button-small button-small-md " [attr.disabled]="(!t.en_fecha || !t.disponible) ? '' : null" (click)="goToConfirmacion(t)" small round><ion-icon name="md-time"></ion-icon>  &nbsp;{{ t.start }}</button>
    	  </ion-item>
    	</div>
      <div *ngIf=(!hayTurnos)>
          <ion-item>
              <span class="hour">No hay turnos disponibles para este día.</span>
          </ion-item>
        </div>
  	</ion-list>
    <ion-list *ngSwitchCase="'manana'">
      <div ng-repeat="group in groups" *ngFor='let tur of turnos'>
        <ion-item  class="item-stable" (click)="toggleDetails(tur)">
            <span class="hour-line"></span>
            <span class="hour"> {{ tur.hora }} HS</span>
            <ion-icon name="arrow-dropdown" class="pull-right"></ion-icon>
        </ion-item>
        <ion-item class="item-accordion" *ngIf="tur.showDetails">
              <button ion-button  *ngFor='let t of tur.turnos' class="{{ t.title }} btn-small button button-md button-default button-default-md button-round button-round-md button-small button-small-md" [attr.disabled]="(!t.en_fecha || !t.disponible) ? '' : null" (click)="goToConfirmacion(t)" small round><ion-icon name="md-time"></ion-icon>  &nbsp;{{ t.start }}</button>
        </ion-item>
      </div>
      <div *ngIf=(!hayTurnos)>
        <ion-item>
            <span class="hour">No hay turnos disponibles para este día.</span>
        </ion-item>
      </div>
    </ion-list>

    <ion-list *ngSwitchCase="'calendar'">
      <div>
        <ion-item class="form-control">
          <ion-label stacked>ELEGIR DÍA {{ otro_dia }}</ion-label>
          <ion-datetime displayFormat="DD/MM/YYYY" max="2030-10-31" min="2017" name="otro_dia" doneText="Elegir" [ngModel]="otro_dia" (ngModelChange)="onChangeDate($event)"></ion-datetime>
          <ion-icon name="md-create"></ion-icon>
        </ion-item>
      </div>

      <div ng-repeat="group in groups" *ngFor='let tur of turnos'>
        <ion-item  class="item-stable" (click)="toggleDetails(tur)">
            <span class="hour-line"></span>
            <span class="hour"> {{ tur.hora }} HS</span>
            <ion-icon name="arrow-dropdown" class="pull-right"></ion-icon>
        </ion-item>
        <ion-item class="item-accordion" *ngIf="tur.showDetails">
              <button ion-button  *ngFor='let t of tur.turnos' class="{{ t.title }} btn-small button button-md button-default button-default-md button-round button-round-md button-small button-small-md" [attr.disabled]="(!t.en_fecha || !t.disponible) ? '' : null" (click)="goToConfirmacion(t)" small round><ion-icon name="md-time"></ion-icon>  &nbsp;{{ t.start }}</button>
        </ion-item>
      </div>
      <div *ngIf=(!hayTurnos)>
        <ion-item>
            <span class="hour">No hay turnos disponibles para este día.</span>
        </ion-item>
      </div>

    </ion-list>
  </div>

</ion-content>
